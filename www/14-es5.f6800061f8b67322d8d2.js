(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"f+ep":function(n,l,u){"use strict";u.r(l);var e=u("CcnG"),o=u("mrSG"),t=u("gIcY"),i=u("ZZ/e"),r=u("6uu6"),a=u("+JMX"),s=u("BKks"),b=u("67Y/"),c=function(){function n(n,l,u,e,o,i,r,a){this.loadingCtrl=n,this.alertCtrl=l,this.authService=u,this.crudService=e,this.router=o,this.formBuilder=i,this.firestore=r,this.global=a,this.loginForm=this.formBuilder.group({email:["",t.l.compose([t.l.required,t.l.email])],password:["",t.l.compose([t.l.required,t.l.minLength(6)])]})}return n.prototype.ngOnInit=function(){},n.prototype.loginUser=function(n){return o.__awaiter(this,void 0,void 0,(function(){var l,u,e=this;return o.__generator(this,(function(t){switch(t.label){case 0:return n.valid?[3,1]:(console.log("Form is not valid yet, current value:",n.value),[3,4]);case 1:return l=this,[4,this.loadingCtrl.create()];case 2:return l.loading=t.sent(),[4,this.loading.present()];case 3:t.sent(),this.authService.loginUser(u=n.value.email,n.value.password).then((function(){e.loading.dismiss().then((function(){e.UserRef$=e.firestore.collection("Passagers/",(function(n){return n.where("Email","==",u)})).snapshotChanges().pipe(Object(b.a)((function(n){return n.map((function(n){e.data=n.payload.doc.data(),e.id=n.payload.doc.id}))}))),e.firestore.doc("Passagers/"+e.id).update({PushToken:e.global.PushToken}),e.router.navigateByUrl("home")}))}),(function(n){e.loading.dismiss().then((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(l){switch(l.label){case 0:return[4,this.alertCtrl.create({message:n.message,buttons:[{text:"Ok",role:"cancel"}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}}))}))}))})),t.label=4;case 4:return[2]}}))}))},n}(),d=function(){return function(){}}(),g=u("pMnS"),p=u("oBZk"),m=u("Ip0R"),h=u("ZYCi"),f=u("fvl4"),C=e.rb({encapsulation:0,styles:[["form[_ngcontent-%COMP%]{margin-bottom:32px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px!important}p[_ngcontent-%COMP%]{font-size:.8em;color:#d2d2d2}ion-label[_ngcontent-%COMP%]{margin-left:5px}ion-input[_ngcontent-%COMP%]{padding:5px}.invalid[_ngcontent-%COMP%]{border-bottom:1px solid #ff6153}.error-message[_ngcontent-%COMP%]{min-height:2.2rem}.error-message[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:2px 0;font-size:60%;color:#ff6153}.error-message[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{border-bottom:0!important}"]],data:{}});function k(n){return e.Jb(0,[(n()(),e.tb(0,0,null,null,4,"ion-item",[["class","error-message"]],null,null,null,p.H,p.o)),e.sb(1,49152,null,0,i.G,[e.h,e.k,e.z],null,null),(n()(),e.tb(2,0,null,0,2,"ion-label",[],null,null,null,p.I,p.p)),e.sb(3,49152,null,0,i.M,[e.h,e.k,e.z],null,null),(n()(),e.Ib(-1,0,["Please enter a valid email address."]))],null,null)}function v(n){return e.Jb(0,[(n()(),e.tb(0,0,null,null,4,"ion-item",[["class","error-message"]],null,null,null,p.H,p.o)),e.sb(1,49152,null,0,i.G,[e.h,e.k,e.z],null,null),(n()(),e.tb(2,0,null,0,2,"ion-label",[],null,null,null,p.I,p.p)),e.sb(3,49152,null,0,i.M,[e.h,e.k,e.z],null,null),(n()(),e.Ib(-1,0,["Your password needs more than 6 characters."]))],null,null)}function E(n){return e.Jb(0,[(n()(),e.tb(0,0,null,null,35,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,u){var o=!0;return"submit"===l&&(o=!1!==e.Eb(n,2).onSubmit(u)&&o),"reset"===l&&(o=!1!==e.Eb(n,2).onReset()&&o),o}),null,null)),e.sb(1,16384,null,0,t.p,[],null,null),e.sb(2,540672,null,0,t.d,[[8,null],[8,null]],{form:[0,"form"]},null),e.Fb(2048,null,t.a,null,[t.d]),e.sb(4,16384,null,0,t.i,[[4,t.a]],null,null),(n()(),e.tb(5,0,null,null,11,"ion-item",[],null,null,null,p.H,p.o)),e.sb(6,49152,null,0,i.G,[e.h,e.k,e.z],null,null),(n()(),e.tb(7,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,p.I,p.p)),e.sb(8,49152,null,0,i.M,[e.h,e.k,e.z],{position:[0,"position"]},null),(n()(),e.Ib(-1,0,["Email"])),(n()(),e.tb(10,0,null,0,6,"ion-input",[["formControlName","email"],["placeholder","Your email address"],["type","email"]],[[2,"invalid",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,u){var o=!0;return"ionBlur"===l&&(o=!1!==e.Eb(n,11)._handleBlurEvent(u.target)&&o),"ionChange"===l&&(o=!1!==e.Eb(n,11)._handleInputEvent(u.target)&&o),o}),p.G,p.n)),e.sb(11,16384,null,0,i.Lb,[e.k],null,null),e.Fb(1024,null,t.f,(function(n){return[n]}),[i.Lb]),e.sb(13,671744,null,0,t.c,[[3,t.a],[8,null],[8,null],[6,t.f],[2,t.o]],{name:[0,"name"]},null),e.Fb(2048,null,t.g,null,[t.c]),e.sb(15,16384,null,0,t.h,[[4,t.g]],null,null),e.sb(16,49152,null,0,i.F,[e.h,e.k,e.z],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(n()(),e.ib(16777216,null,null,1,null,k)),e.sb(18,16384,null,0,m.i,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.tb(19,0,null,null,11,"ion-item",[],null,null,null,p.H,p.o)),e.sb(20,49152,null,0,i.G,[e.h,e.k,e.z],null,null),(n()(),e.tb(21,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,p.I,p.p)),e.sb(22,49152,null,0,i.M,[e.h,e.k,e.z],{position:[0,"position"]},null),(n()(),e.Ib(-1,0,["Password"])),(n()(),e.tb(24,0,null,0,6,"ion-input",[["formControlName","password"],["placeholder","Your password"],["type","password"]],[[2,"invalid",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,u){var o=!0;return"ionBlur"===l&&(o=!1!==e.Eb(n,25)._handleBlurEvent(u.target)&&o),"ionChange"===l&&(o=!1!==e.Eb(n,25)._handleInputEvent(u.target)&&o),o}),p.G,p.n)),e.sb(25,16384,null,0,i.Lb,[e.k],null,null),e.Fb(1024,null,t.f,(function(n){return[n]}),[i.Lb]),e.sb(27,671744,null,0,t.c,[[3,t.a],[8,null],[8,null],[6,t.f],[2,t.o]],{name:[0,"name"]},null),e.Fb(2048,null,t.g,null,[t.c]),e.sb(29,16384,null,0,t.h,[[4,t.g]],null,null),e.sb(30,49152,null,0,i.F,[e.h,e.k,e.z],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(n()(),e.ib(16777216,null,null,1,null,v)),e.sb(32,16384,null,0,m.i,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.tb(33,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,u){var e=!0,o=n.component;return"click"===l&&(e=!1!==o.loginUser(o.loginForm)&&e),e}),p.u,p.b)),e.sb(34,49152,null,0,i.j,[e.h,e.k,e.z],{expand:[0,"expand"]},null),(n()(),e.Ib(-1,0,[" Log In "])),(n()(),e.tb(36,0,null,null,4,"ion-button",[["expand","block"],["fill","clear"],["routerLink","/register"]],null,[[null,"click"]],(function(n,l,u){var o=!0;return"click"===l&&(o=!1!==e.Eb(n,38).onClick()&&o),"click"===l&&(o=!1!==e.Eb(n,39).onClick(u)&&o),o}),p.u,p.b)),e.sb(37,49152,null,0,i.j,[e.h,e.k,e.z],{expand:[0,"expand"],fill:[1,"fill"]},null),e.sb(38,16384,null,0,h.n,[h.m,h.a,[8,null],e.D,e.k],{routerLink:[0,"routerLink"]},null),e.sb(39,737280,null,0,i.Kb,[m.g,i.Hb,e.k,h.m,[2,h.n]],null,null),(n()(),e.Ib(-1,0,[" Create a new account\n"])),(n()(),e.tb(41,0,null,null,4,"ion-button",[["expand","block"],["fill","clear"],["routerLink","/reset-password"]],null,[[null,"click"]],(function(n,l,u){var o=!0;return"click"===l&&(o=!1!==e.Eb(n,43).onClick()&&o),"click"===l&&(o=!1!==e.Eb(n,44).onClick(u)&&o),o}),p.u,p.b)),e.sb(42,49152,null,0,i.j,[e.h,e.k,e.z],{expand:[0,"expand"],fill:[1,"fill"]},null),e.sb(43,16384,null,0,h.n,[h.m,h.a,[8,null],e.D,e.k],{routerLink:[0,"routerLink"]},null),e.sb(44,737280,null,0,i.Kb,[m.g,i.Hb,e.k,h.m,[2,h.n]],null,null),(n()(),e.Ib(-1,0,[" I forgot my password :(\n"]))],(function(n,l){var u=l.component;n(l,2,0,u.loginForm),n(l,8,0,"stacked"),n(l,13,0,"email"),n(l,16,0,"Your email address","email"),n(l,18,0,!u.loginForm.controls.email.valid&&u.loginForm.controls.email.touched),n(l,22,0,"stacked"),n(l,27,0,"password"),n(l,30,0,"Your password","password"),n(l,32,0,!u.loginForm.controls.password.valid&&u.loginForm.controls.password.touched),n(l,34,0,"block"),n(l,37,0,"block","clear"),n(l,38,0,"/register"),n(l,39,0),n(l,42,0,"block","clear"),n(l,43,0,"/reset-password"),n(l,44,0)}),(function(n,l){var u=l.component;n(l,0,0,e.Eb(l,4).ngClassUntouched,e.Eb(l,4).ngClassTouched,e.Eb(l,4).ngClassPristine,e.Eb(l,4).ngClassDirty,e.Eb(l,4).ngClassValid,e.Eb(l,4).ngClassInvalid,e.Eb(l,4).ngClassPending),n(l,10,0,!u.loginForm.controls.email.valid&&u.loginForm.controls.email.touched,e.Eb(l,15).ngClassUntouched,e.Eb(l,15).ngClassTouched,e.Eb(l,15).ngClassPristine,e.Eb(l,15).ngClassDirty,e.Eb(l,15).ngClassValid,e.Eb(l,15).ngClassInvalid,e.Eb(l,15).ngClassPending),n(l,24,0,!u.loginForm.controls.password.valid&&u.loginForm.controls.password.touched,e.Eb(l,29).ngClassUntouched,e.Eb(l,29).ngClassTouched,e.Eb(l,29).ngClassPristine,e.Eb(l,29).ngClassDirty,e.Eb(l,29).ngClassValid,e.Eb(l,29).ngClassInvalid,e.Eb(l,29).ngClassPending)}))}function w(n){return e.Jb(0,[(n()(),e.tb(0,0,null,null,1,"app-login",[],null,null,null,E,C)),e.sb(1,114688,null,0,c,[i.Fb,i.a,r.a,a.a,h.m,t.b,f.a,s.a],null,null)],(function(n,l){n(l,1,0)}),null)}var I=e.pb("app-login",c,w,{},{},[]);u.d(l,"LoginPageModuleNgFactory",(function(){return P}));var P=e.qb(d,[],(function(n){return e.Bb([e.Cb(512,e.j,e.bb,[[8,[g.a,I]],[3,e.j],e.x]),e.Cb(4608,m.k,m.j,[e.u,[2,m.r]]),e.Cb(4608,t.n,t.n,[]),e.Cb(4608,i.b,i.b,[e.z,e.g]),e.Cb(4608,i.Gb,i.Gb,[i.b,e.j,e.q]),e.Cb(4608,i.Jb,i.Jb,[i.b,e.j,e.q]),e.Cb(4608,t.b,t.b,[]),e.Cb(1073742336,m.b,m.b,[]),e.Cb(1073742336,t.m,t.m,[]),e.Cb(1073742336,t.e,t.e,[]),e.Cb(1073742336,i.Db,i.Db,[]),e.Cb(1073742336,h.o,h.o,[[2,h.t],[2,h.m]]),e.Cb(1073742336,t.k,t.k,[]),e.Cb(1073742336,d,d,[]),e.Cb(1024,h.k,(function(){return[[{path:"",component:c}]]}),[])])}))}}]);